{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"C:\\\\Users\\\\Feline\\\\Projects\\\\blog\\\\client\\\\pages\\\\blogs.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Header from '../components/header';\nimport axios from 'axios';\n\nfunction BlogPage(_ref) {\n  var _this = this;\n\n  var blogs = _ref.blogs,\n      error = _ref.error;\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 6,\n      columnNumber: 9\n    }\n  }, __jsx(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7,\n      columnNumber: 13\n    }\n  }), __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8,\n      columnNumber: 13\n    }\n  }, \"\\u535A\\u5BA2\\u9875\\u9762\"), __jsx(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 13\n    }\n  }, blogs ? blogs.map(function (blog, index) {\n    return __jsx(\"li\", {\n      key: blog._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 21\n      }\n    }, __jsx(\"h1\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 25\n      }\n    }, blog.title));\n  }) : function () {\n    return __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 21\n      }\n    }, \"failed:\", JSON.stringify(blogs));\n  }()));\n}\n\nexport function getInitialProps(context) {\n  var data, err;\n  return _regeneratorRuntime.async(function getInitialProps$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          data = null;\n          err = null;\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(axios.get('http://127.0.0.1:8000/blogs/list').then(function (res) {\n            console.log(res.data);\n            return {\n              props: {\n                blogs: res.data\n              }\n            };\n          })[\"catch\"](function (err) {\n            console.log(err);\n            return {\n              props: {\n                error: err,\n                blogs: ['null']\n              }\n            };\n          }));\n\n        case 4:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 8:\n          return _context.abrupt(\"return\", {\n            props: {\n              data: [{}],\n              err: err\n            }\n          });\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport default BlogPage;","map":{"version":3,"sources":["C:/Users/Feline/Projects/blog/client/pages/blogs.js"],"names":["Header","axios","BlogPage","blogs","error","map","blog","index","_id","title","JSON","stringify","getInitialProps","context","data","err","get","then","res","console","log","props"],"mappings":";;;;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,SAASC,QAAT,OAAiC;AAAA;;AAAA,MAAdC,KAAc,QAAdA,KAAc;AAAA,MAARC,KAAQ,QAARA,KAAQ;AAC7B,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKD,KAAK,GAACA,KAAK,CAACE,GAAN,CAAU,UAACC,IAAD,EAAMC,KAAN,EAAc;AAC/B,WACI;AAAI,MAAA,GAAG,EAAED,IAAI,CAACE,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKF,IAAI,CAACG,KAAV,CADJ,CADJ;AAKH,GANU,CAAD,GAMP,YAAU;AACT,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAWC,IAAI,CAACC,SAAL,CAAeR,KAAf,CAAX,CADJ;AAGH,GAJE,EANH,CAHJ,CADJ;AAkBH;;AAED,OAAO,SAAeS,eAAf,CAA+BC,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,UAAAA,IADD,GACQ,IADR;AAECC,UAAAA,GAFD,GAEO,IAFP;AAAA;AAAA,2CAGUd,KAAK,CAACe,GAAN,CAAU,kCAAV,EACRC,IADQ,CACH,UAACC,GAAD,EAAS;AACPC,YAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACJ,IAAhB;AACJ,mBAAO;AACHO,cAAAA,KAAK,EAAC;AACFlB,gBAAAA,KAAK,EAACe,GAAG,CAACJ;AADR;AADH,aAAP;AAKH,WARQ,WASF,UAACC,GAAD,EAAO;AACVI,YAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AACA,mBAAO;AACHM,cAAAA,KAAK,EAAC;AACFjB,gBAAAA,KAAK,EAACW,GADJ;AAEFZ,gBAAAA,KAAK,EAAC,CAAC,MAAD;AAFJ;AADH,aAAP;AAMH,WAjBQ,CAHV;;AAAA;AAAA;;AAAA;AAAA,2CA+BQ;AACHkB,YAAAA,KAAK,EAAC;AACFP,cAAAA,IAAI,EAAC,CAAC,EAAD,CADH;AAEFC,cAAAA,GAAG,EAACA;AAFF;AADH,WA/BR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwCP,eAAeb,QAAf","sourcesContent":["import Header from '../components/header'\r\nimport axios from 'axios'\r\n\r\nfunction BlogPage({blogs,error}) {\r\n    return (\r\n        <div>\r\n            <Header />\r\n            <h1>博客页面</h1>\r\n            <ul>{blogs?blogs.map((blog,index)=>{\r\n                return (\r\n                    <li key={blog._id}>\r\n                        <h1>{blog.title}</h1>\r\n                    </li>\r\n                )\r\n            }):function(){\r\n                return (\r\n                    <p>failed:{JSON.stringify(blogs)}</p>\r\n                )\r\n            }()}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport async function getInitialProps(context) {\r\n    let data = null\r\n    let err = null\r\n    return await axios.get('http://127.0.0.1:8000/blogs/list')\r\n        .then((res) => {\r\n                console.log(res.data)\r\n            return {\r\n                props:{\r\n                    blogs:res.data\r\n                }\r\n            }\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err)\r\n            return {\r\n                props:{\r\n                    error:err,\r\n                    blogs:['null']\r\n                }\r\n            }\r\n        })\r\n        console.log(data)\r\n\r\n        if (data) {\r\n            return {\r\n                props:{\r\n                    blogs:data\r\n\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            props:{\r\n                data:[{}],\r\n                err:err\r\n            }\r\n        }\r\n\r\n}\r\n\r\nexport default BlogPage\r\n\r\n"]},"metadata":{},"sourceType":"module"}